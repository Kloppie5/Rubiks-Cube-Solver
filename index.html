<!DOCTYPE html>
<html>
  <head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  </head>
  <body>
    <svg style="display:none">
      <symbol id="impossible">
        <path d="M 20 20 L 80 80 m 80 20 L 20 80" stroke="red" stroke-width="4" fill="none" />
      </symbol>
      <symbol id="unknown">
      </symbol>

      <symbol id="mov13">
        <path d="M 25 25 l 60 0 m -8 -8 l 8 8 l -8 8" stroke="black" stroke-width="4" fill="none" />
      </symbol>
      <symbol id="mov17">
        <path d="M 25 25 l 0 60 m -8 -8 l 8 8 l 8 -8" stroke="black" stroke-width="4" fill="none" />
      </symbol>
      <symbol id="mov19">
        <path d="M 25 25 l 60 60 m -11 0 l 11 0 l 0 -11" stroke="black" stroke-width="4" fill="none" />
      </symbol>
      <symbol id="mov31">
        <path d="M 85 25 l -60 0 m 8 -8 l -8 8 l 8 8" stroke="black" stroke-width="4" fill="none" />
      </symbol>
      <symbol id="mov37">
        <path d="M 85 25 l -60 60 m 0 -11 l 0 11 l 11 0" stroke="black" stroke-width="4" fill="none" />
      </symbol>
      <symbol id="mov39">
        <path d="M 85 25 l 0 60 m -8 -8 l 8 8 l 8 -8" stroke="black" stroke-width="4" fill="none" />
      </symbol>
      <symbol id="mov71">
        <path d="M 25 85 l 0 -60 m -8 8 l 8 -8 l 8 8" stroke="black" stroke-width="4" fill="none" />
      </symbol>
      <symbol id="mov73">
        <path d="M 25 85 l 60 -60 m -11 0 l 11 0 l 0 11" stroke="black" stroke-width="4" fill="none" />
      </symbol>
      <symbol id="mov79">
        <path d="M 25 85 l 60 0 m -8 -8 l 8 8 l -8 8" stroke="black" stroke-width="4" fill="none" />
      </symbol>
      <symbol id="mov91">
        <path d="M 85 85 l -60 -60 m 0 11 l 0 -11 l 11 0" stroke="black" stroke-width="4" fill="none" />
      </symbol>
      <symbol id="mov93">
        <path d="M 85 85 l 0 -60 m -8 8 l 8 -8 l 8 8" stroke="black" stroke-width="4" fill="none" />
      </symbol>
      <symbol id="mov97">
        <path d="M 85 85 l -60 0 m 8 -8 l -8 8 l 8 8" stroke="black" stroke-width="4" fill="none" />
      </symbol>

      <symbol id="mov24">
        <path d="M 55 25 l -30 30 m 0 -11 l 0 11 l 11 0" stroke="black" stroke-width="4" fill="none" />
      </symbol>
      <symbol id="mov26">
        <path d="M 55 25 l 30 30 m 0 -11 l 0 11 l -11 0" stroke="black" stroke-width="4" fill="none" />
      </symbol>
      <symbol id="mov28">
        <path d="M 55 25 l 0 60 m -8 -8 l 8 8 l 8 -8" stroke="black" stroke-width="4" fill="none" />
      </symbol>
      <symbol id="mov42">
        <path d="M 25 55 l 30 -30 m -11 0 l 11 0 l 0 11" stroke="black" stroke-width="4" fill="none" />
      </symbol>
      <symbol id="mov46">
        <path d="M 25 55 l 60 0 m -8 -8 l 8 8 l -8 8" stroke="black" stroke-width="4" fill="none" />
      </symbol>
      <symbol id="mov48">
        <path d="M 25 55 l 30 30 m 0 -11 l 0 11 l -11 0" stroke="black" stroke-width="4" fill="none" />
      </symbol>
      <symbol id="mov62">
        <path d="M 85 55 l -30 -30 m 0 11 l 0 -11 l 11 0" stroke="black" stroke-width="4" fill="none" />
      </symbol>
      <symbol id="mov64">
        <path d="M 85 55 l -60 00 m 8 -8 l -8 8 l 8 8" stroke="black" stroke-width="4" fill="none" />
      </symbol>
      <symbol id="mov68">
        <path d="M 85 55 l -30 30 m 0 -11 l 0 11 l 11 0" stroke="black" stroke-width="4" fill="none" />
      </symbol>
      <symbol id="mov82">
        <path d="M 55 85 l 0 -60 m -8 8 l 8 -8 l 8 8" stroke="black" stroke-width="4" fill="none" />
      </symbol>
      <symbol id="mov84">
        <path d="M 55 85 l -30 -30 m 0 11 l 0 -11 l 11 0" stroke="black" stroke-width="4" fill="none" />
      </symbol>
      <symbol id="mov86">
        <path d="M 55 85 l 30 -30 m -11 0 l 11 0 l 0 11" stroke="black" stroke-width="4" fill="none" />
      </symbol>

      <symbol id="edgerotate-clockwise">
        <path d="M 17 50 a 33 33 0 0 1 33 -33 m -8 -8 l 8 8 l -8 8 m 8 -8 a 33 33 0 0 1 33 33 m -8 -8 l 8 8 l 8 -8 m -8 8 a 33 33 0 0 1 -33 33 m 8 8 l -8 -8 l 8 -8 m -8 8 a 33 33 0 0 1 -33 -33 m 8 8 l -8 -8 l -8 8 m 8 -8" stroke="black" stroke-width="4" fill="none" />
      </symbol>
      <symbol id="edgerotate-counterclockwise">
        <path d="M 17 50 a 33 33 0 0 1 33 -33 m 8 -8 l -8 8 l 8 8 m -8 -8 a 33 33 0 0 1 33 33 m -8 8 l 8 -8 l 8 8 m -8 -8 a 33 33 0 0 1 -33 33 m -8 -8 l 8 8 l -8 8 m 8 -8 a 33 33 0 0 1 -33 -33 m -8 -8 l 8 8 l 8 -8 m -8 8" stroke="black" stroke-width="4" fill="none" />
      </symbol>
    </svg>

    <div id="intial-method">
      Initial method;
      <ul>
        <li>Cross by intuition</li>
        <li>First layer corners</li>
        <li>Second layer edges</li>
        <li>Last layer edge orientation</li>
        <li>Last layer corner orientation</li>
        <li>Last layer corner permutation</li>
        <li>Last layer edge permutation</li>
      </ul>
      <div id="last-layer-edge-orientation-initial">
        F RUR'U' F'
      </div>
    </div>

    <table style="border-collapse:collapse" cellspacing="0" cellpadding="0" id="last-layer-permutations"></table>
    <script>
      const marks = {
        "P-13792468": "I",
        "P-37192468": "Aa",
        "P-73912468": "Ab",
        "P-19738462": "F; ",
        "P-19738246": "Ga",
        "P-19734682": "Gb",
        "P-19736842": "Gc",
        "P-19738624": "Gd",
        "P-19736428": "Ja; l'R'F RF' RU'2 r'UrU2",
        "P-19732486": "Jb; (RUR'F') (RUR'U') (R'FR2U'R'U)'",
        "P-19734268": "Ra",
        "P-19732864": "Rb",
        "P-19732648": "T; (RUR'U') (R'FR2 U'R'U') (RUR'F')",
        "P-79132468": "E",
        "P-17392648": "Na",
        "P-93712648": "Nb",
        "P-93716428": "V",
        "P-93714268": "Y; F RU'R'U' RUR'F' RU'R'U R'F RF'",
        "P-13798642": "H; M2U' M2U' U'M2 U'M2",
        "P-13792846": "Ua; M2UM' U'2MUM2",
        "P-13792684": "Ub; M2U'M' U'2MU'M2",
        "P-13794286": "Adapted Z; M'U' M'2U' M'2U M'U' U'M'2U",
      }

      function ukey ( key ) {
        return "C" + cuperm[key[1]] + cuperm[key[2]] + cuperm[key[3]] + cuperm[key[4]] + "E" + euperm[key[6]] + euperm[key[7]] + euperm[key[8]] + euperm[key[9]];
      }
      function skey ( key ) {
        return "C" + cuperm[key[3]] + cuperm[key[1]] + cuperm[key[4]] + cuperm[key[2]] + "E" + euperm[key[7]] + euperm[key[9]] + euperm[key[6]] + euperm[key[8]];
      }

      var colormap = [
        "white",
        "green",
        "red",
        "yellow",
        "blue",
        "orange",
      ];

      function initializeAllSVGs ( ) {
        $(".cubeface").each(function() {
          var info = $(this).attr("class").split(/\s+/)[1].split("-");

          var layer = $("<g></g>");

          var cindex = info.indexOf("C") + 1;
          var colors = "000000000000000000000";
          console.log(colors);
          if ( cindex > 0 )
            colors = info[cindex];
          colors = colors.split("");

          var pos = [
                             [10,   0, 30, 10], [40,   0, 30, 10], [70,   0, 30, 10],
            [0, 10, 10, 30], [10,  10, 30, 30], [40,  10, 30, 30], [70,  10, 30, 30], [100, 10, 10, 30],
            [0, 40, 10, 30], [10,  40, 30, 30], [40,  40, 30, 30], [70,  40, 30, 30], [100, 40, 10, 30],
            [0, 70, 10, 30], [10,  70, 30, 30], [40,  70, 30, 30], [70,  70, 30, 30], [100, 70, 10, 30],
                             [10, 100, 30, 10], [40, 100, 30, 10], [70, 100, 30, 10]
          ];
          for ( var i = 0 ; i < pos.length ; ++i ) {
            layer.append($("<rect x='" + pos[i][0] + "' y='" + pos[i][1] + "' width='" + pos[i][2] + "' height='" + pos[i][3] + "' fill='" + colormap[colors[i]] + "' stroke='black' stroke-width='1' />"));
          }
          $(this).append(layer);

          var pindex = info.indexOf("P") + 1;
          if ( pindex > 0 ) {
            var perm = info[pindex];
            for ( var i = 0 ; i < perm.length ; ++i )
              if ( i+1 != perm[i] )
                $(this).append($("<use xlink:href='#mov" + (i+1) + ""+ perm[i] + "' />"));
          }
        });
      }

      $(function() {
        var table = $("#last-layer-permutations");
        $.each(["2468", "D", "2468", "4268", "6428", "2864", "2486", "8462", "D", "6284", "2684", "8264", "6482", "6248", "4286", "D", "8642", "6842", "4682", "8246", "8624", "2648", "D", "4826", "8426", "2846", "4628", "4862", "6824"], function(eindex, evalue) {
          var row = $("<tr></tr>");
          $.each(["1379", "D", "1379", "3179", "7319", "1973", "1397", "9371", "D", "3917", "9317", "1937", "3719", "3971", "7913", "D", "9731", "7931", "3791", "9137", "9713", "1739", "D", "7193", "1793", "9173", "7391", "7139", "3197"], function(cindex, cvalue) {
            if ( cvalue == "D" ) {
              row.append($("<td style='border-left: 10px solid black'></td>"));
              return;
            }
            if ( evalue == "D" ) {
              row.append($("<td style='border-bottom: 10px solid black'></td>"));
              return;
            }
            var permut = cvalue[0] + evalue[0] + cvalue[1] + evalue[1] + "5" + evalue[2] + cvalue[2] + evalue[3] + cvalue[3];
            var td = $("<td id='PLL-" + permut + "'></td>");
            if ( marks[permut] )
              td.attr("title", marks[permut]);

            td.append("<svg class='cubeface P-" + permut + "' width='100%' height='100%' viewBox='0 0 110 110'></svg>");
            row.append(td);
          });
          table.append(row);
        });

        initializeAllSVGs();
        // refresh table
        table.html(table.html());
      });
    </script>
  </body>
</html>
