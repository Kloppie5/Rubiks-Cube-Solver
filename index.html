<html>
  <head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  </head>
  <body>
    <svg style="display:none">
      <symbol id="layer">
        <rect x="0.5" y="0.5" width="33" height="33" fill="none" stroke="black" stroke-width="1"/>
        <rect x="33.5" y="0.5" width="33" height="33" fill="none" stroke="black" stroke-width="1"/>
        <rect x="66.5" y="0.5" width="33" height="33" fill="none" stroke="black" stroke-width="1"/>
        <rect x="0.5" y="33.5" width="33" height="33" fill="none" stroke="black" stroke-width="1"/>
        <rect x="33.5" y="33.5" width="33" height="33" fill="none" stroke="black" stroke-width="1"/>
        <rect x="66.5" y="33.5" width="33" height="33" fill="none" stroke="black" stroke-width="1"/>
        <rect x="0.5" y="66.5" width="33" height="33" fill="none" stroke="black" stroke-width="1"/>
        <rect x="33.5" y="66.5" width="33" height="33" fill="none" stroke="black" stroke-width="1"/>
        <rect x="66.5" y="66.5" width="33" height="33" fill="none" stroke="black" stroke-width="1"/>
      </symbol>

      <symbol id="impossible">
        <path d="M 20 20 L 80 80, M 80 20 L 20 80" stroke="red" stroke-width="4" fill="none" />
      </symbol>
      <symbol id="unknown">
      </symbol>

      <symbol id="C12">
        <path d="M 17 17 l 66 0, m -8 -8 l 8 8 l -8 8" stroke="black" stroke-width="4" fill="none" />
      </symbol>
      <symbol id="C13">
        <path d="M 17 17 l 0 66, m -8 -8 l 8 8 l 8 -8" stroke="black" stroke-width="4" fill="none" />
      </symbol>
      <symbol id="C14">
        <path d="M 17 17 l 66 66, m -11 0 l 11 0 l 0 -11" stroke="black" stroke-width="4" fill="none" />
      </symbol>
      <symbol id="C21">
        <path d="M 83 17 l -66 0, m 8 -8 l -8 8 l 8 8" stroke="black" stroke-width="4" fill="none" />
      </symbol>
      <symbol id="C23">
        <path d="M 83 17 l -66 66, m 0 -11 l 0 11 l 11 0" stroke="black" stroke-width="4" fill="none" />
      </symbol>
      <symbol id="C24">
        <path d="M 83 17 l 0 66, m -8 -8 l 8 8 l 8 -8" stroke="black" stroke-width="4" fill="none" />
      </symbol>
      <symbol id="C31">
        <path d="M 17 83 l 0 -66, m -8 8 l 8 -8 l 8 8" stroke="black" stroke-width="4" fill="none" />
      </symbol>
      <symbol id="C32">
        <path d="M 17 83 l 66 -66, m -11 0 l 11 0 l 0 11" stroke="black" stroke-width="4" fill="none" />
      </symbol>
      <symbol id="C34">
        <path d="M 17 83 l 66 0, m -8 -8 l 8 8 l -8 8" stroke="black" stroke-width="4" fill="none" />
      </symbol>
      <symbol id="C41">
        <path d="M 83 83 l -66 -66, m 0 11 l 0 -11 l 11 0" stroke="black" stroke-width="4" fill="none" />
      </symbol>
      <symbol id="C42">
        <path d="M 83 83 l 0 -66, m -8 8 l 8 -8 l 8 8" stroke="black" stroke-width="4" fill="none" />
      </symbol>
      <symbol id="C43">
        <path d="M 83 83 l -66 0, m 8 -8 l -8 8 l 8 8" stroke="black" stroke-width="4" fill="none" />
      </symbol>

      <symbol id="E12">
        <path d="M 50 17 l -33 33, m 0 -11 l 0 11 l 11 0" stroke="black" stroke-width="4" fill="none" />
      </symbol>
      <symbol id="E13">
        <path d="M 50 17 l 33 33, m 0 -11 l 0 11 l -11 0" stroke="black" stroke-width="4" fill="none" />
      </symbol>
      <symbol id="E14">
        <path d="M 50 17 l 0 66, m -8 -8 l 8 8 l 8 -8" stroke="black" stroke-width="4" fill="none" />
      </symbol>
      <symbol id="E21">
        <path d="M 17 50 l 33 -33, m -11 0 l 11 0 l 0 11" stroke="black" stroke-width="4" fill="none" />
      </symbol>
      <symbol id="E23">
        <path d="M 17 50 l 66 0, m -8 -8 l 8 8 l -8 8" stroke="black" stroke-width="4" fill="none" />
      </symbol>
      <symbol id="E24">
        <path d="M 17 50 l 33 33, m 0 -11 l 0 11 l -11 0" stroke="black" stroke-width="4" fill="none" />
      </symbol>
      <symbol id="E31">
        <path d="M 83 50 l -33 -33, m 0 11 l 0 -11 l 11 0" stroke="black" stroke-width="4" fill="none" />
      </symbol>
      <symbol id="E32">
        <path d="M 83 50 l -66 00, m 8 -8 l -8 8 l 8 8" stroke="black" stroke-width="4" fill="none" />
      </symbol>
      <symbol id="E34">
        <path d="M 83 50 l -33 33, m 0 -11 l 0 11 l 11 0" stroke="black" stroke-width="4" fill="none" />
      </symbol>
      <symbol id="E41">
        <path d="M 50 83 l 0 -66, m -8 8 l 8 -8 l 8 8" stroke="black" stroke-width="4" fill="none" />
      </symbol>
      <symbol id="E42">
        <path d="M 50 83 l -33 -33, m 0 11 l 0 -11 l 11 0" stroke="black" stroke-width="4" fill="none" />
      </symbol>
      <symbol id="E43">
        <path d="M 50 83 l 33 -33, m -11 0 l 11 0 l 0 11" stroke="black" stroke-width="4" fill="none" />
      </symbol>

      <symbol id="edgerotate-clockwise">
        <path d="M 17 50, a 33 33 0 0 1 33 -33, m -8 -8 l 8 8 l -8 8 m 8 -8, a 33 33 0 0 1 33 33, m -8 -8 l 8 8 l 8 -8 m -8 8, a 33 33 0 0 1 -33 33, m 8 8 l -8 -8 l 8 -8 m -8 8, a 33 33 0 0 1 -33 -33, m 8 8 l -8 -8 l -8 8 m 8 -8" stroke="black" stroke-width="4" fill="none" />
      </symbol>
      <symbol id="edgerotate-counterclockwise">
        <path d="M 17 50, a 33 33 0 0 1 33 -33, m 8 -8 l -8 8 l 8 8 m -8 -8, a 33 33 0 0 1 33 33, m -8 8 l 8 -8 l 8 8 m -8 -8, a 33 33 0 0 1 -33 33, m -8 -8 l 8 8 l -8 8 m 8 -8, a 33 33 0 0 1 -33 -33, m -8 -8 l 8 8 l 8 -8 m -8 8" stroke="black" stroke-width="4" fill="none" />
      </symbol>
    </svg>

    <table style="border-collapse:collapse" cellspacing="0" cellpadding="0" id="last-layer-permutations"></table>
    <script>
      $(function() {
        var table = $("#last-layer-permutations");
        $.each(["S", "D", "E1234", "E2134", "E3214", "E1432", "E1243", "E4231", "D", "E3142", "E1342", "E4132", "E3241", "E3124", "E2143", "D", "E4321", "E3421", "E2341", "E4123", "E4312", "E1324", "D", "E2413", "E4213", "E1423", "E2314", "E2431", "E3412"], function(eindex, evalue) {
          var row = $("<tr></tr>");
          $.each(["S", "D", "C1234", "C2134", "C3214", "C1432", "C1243", "C4231", "D", "C2413", "C4213", "C1423", "C2314", "C2431", "C3412", "D", "C4321", "C3421", "C2341", "C4123", "C4312", "C1324", "D", "C3142", "C1342", "C4132", "C3241", "C3124", "C2143"], function(cindex, cvalue) {
            if ( cvalue == "D" ) {
              row.append($("<td style='border-left: 10px solid black'></td>"));
              return;
            }
            if ( evalue == "D" ) {
              row.append($("<td style='border-bottom: 10px solid black'></td>"));
              return;
            }
            var td = $("<td title='" + cvalue + evalue + "' id='" + cvalue + evalue + "'></td>");
            var svg = $("<svg width='100%' height='100%' viewBox='0 0 100 100'></svg>");
            svg.append($("<use xlink:href='#layer' />"));
            for ( var i = 1 ; i < cvalue.length ; i++ )
              if ( i != cvalue[i] )
                svg.append($("<use xlink:href='#C" + i + ""+ cvalue[i] + "' />"));
            for ( var i = 1 ; i < evalue.length ; i++ )
              if ( i != evalue[i] )
                svg.append($("<use xlink:href='#E" + i + "" + evalue[i] + "' />"));

            td.append(svg);
            row.append(td);
          });
          table.append(row);
        });
        // refresh table
        table.html(table.html());
      });
    </script>
  </body>
</html>
